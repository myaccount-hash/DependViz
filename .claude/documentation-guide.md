# Documentation Guide - DependViz

このドキュメントは、`.claude/`ディレクトリのドキュメント構造の作成方法と保守方法について説明する。

## ドキュメント構造の設計思想

### なぜ階層構造にしたか

元々のCLAUDE.mdは619行の単一ファイルで、以下の問題がありました：

1. **コンテキストウィンドウの浪費**: AIアシスタントが毎回全体を読み込む必要があった
2. **情報の発見性**: 必要な情報を見つけにくい
3. **保守性**: 更新時に大きなファイル全体を扱う必要があった

### 用途別ディレクトリ構造

各ディレクトリは**用途**に基づいて設計されています：

| ディレクトリ | 用途 | 想定読者 | 参照頻度 |
|-------------|------|---------|---------|
| `guides/` | 開発ガイド | 初めて読む人、開発者 | 高 |
| `reference/` | リファレンス情報 | アーキテクチャ理解、詳細参照 | 中 |
| `troubleshooting/` | 問題解決 | タスク実装、デバッグ時 | 中 |

## ディレクトリ構造

```
.claude/
├── CLAUDE.md                          # メインエントリポイント
├── documentation-guide.md             # 本ファイル（メタドキュメント）
│
├── guides/                            # 開発ガイド
│   ├── README.md                      # ガイドの目次
│   ├── getting-started.md             # 基本原則、プロジェクト概要
│   ├── coding-guidelines.md           # コーディング規約
│   └── development-workflow.md        # 開発ワークフロー
│
├── reference/                         # リファレンス情報
│   ├── README.md                      # リファレンスの目次
│   ├── architecture.md                # アーキテクチャ詳細
│   └── configuration.md               # 拡張機能設定
│
└── troubleshooting/                   # 問題解決
    ├── README.md                      # トラブルシューティングの目次
    ├── common-tasks.md                # 一般的なタスク
    ├── known-issues.md                # 既知の問題
    └── glossary.md                    # 用語集
```

## ナビゲーション構造

### レベル1: エントリポイント
**CLAUDE.md** - すべてのドキュメントへの入り口
- 各カテゴリ（guides, reference, troubleshooting）へのリンク
- クイックスタートガイド
- 簡潔なプロジェクト概要

### レベル2: カテゴリREADME
**guides/README.md**, **reference/README.md**, **troubleshooting/README.md**
- カテゴリ内のドキュメント一覧
- 各ドキュメントの概要
- 他カテゴリへのクロスリファレンス

### レベル3: 個別ドキュメント
**guides/getting-started.md**, **reference/architecture.md** など
- 具体的な内容
- 関連ドキュメントへのリンク
- 前後のドキュメントへのナビゲーション

## リンク方式

### 相対パスの使用

すべてのリンクは相対パスを使用：

```markdown
# 同じディレクトリ内
[コーディング規約](coding-guidelines.md)

# 親ディレクトリ
[メイン](../CLAUDE.md)

# 他のディレクトリ
[アーキテクチャ](../reference/architecture.md)

# アンカーリンク
[エラーハンドリング](../guides/coding-guidelines.md#エラーハンドリング)
```

### リンクのベストプラクティス

1. **相対パスを常に使用**: `.claude/` からの絶対パスは使わない
2. **アンカーリンクで詳細参照**: `#セクション名` で特定セクションを参照
3. **リンク切れチェック**: ファイル名変更時は全リンクを確認

## ドキュメントの更新方法

### 既存ドキュメントの更新

1. **適切なファイルを特定**: 用途に基づいて選択
2. **セクションを更新**: 階層構造を維持
3. **関連リンクを確認**: 変更が他のドキュメントに影響しないか確認

### 新しいドキュメントの追加

**手順**:
1. **適切なディレクトリを選択**: 用途に基づく（guides/reference/troubleshooting）
2. **ファイルを作成**: 命名規則に従う（kebab-case.md）
3. **カテゴリREADME.mdを更新**: 新しいドキュメントへのリンクを追加
4. **CLAUDE.mdを更新**: 必要に応じてメインエントリポイントに追加
5. **ナビゲーションリンクを追加**: 前後のドキュメントへのリンク

**テンプレート**:
```markdown
# タイトル - DependViz

このドキュメントは...について説明する.

## セクション1

...

## セクション2

...

## 関連ドキュメント

- [関連ドキュメント1](../path/to/doc.md)
- [関連ドキュメント2](path/to/doc.md)

---

[← 前のページ](previous.md) | [次のページ →](next.md)
```

### 新しいディレクトリの追加

全く新しいカテゴリを追加する場合：

1. **ディレクトリ作成**: `.claude/new-category/`
2. **README.md作成**: カテゴリの目次
3. **CLAUDE.md更新**: ドキュメント構成セクションに追加
4. **クロスリファレンス**: 他のカテゴリから適切にリンク

## ベストプラクティス

### コンテンツ作成

1. **簡潔に保つ**: 各ドキュメントは100-250行を目安に
2. **明確な見出し**: 何が書かれているか一目でわかる見出しを使用
3. **コード例を含める**: 具体的な例を示す
4. **定期的な更新**: コードベース変更時はドキュメントも更新

### AIアシスタント向け最適化

1. **構造化**: 見出し階層を明確に (## → ### → ####)
2. **検索可能性**: 重要なキーワードを含める
3. **自己完結性**: 各ドキュメントは独立して理解できるように
4. **バージョン情報**: 最終更新日とプロジェクトバージョンを記載

### リンク管理

1. **クロスリファレンス**: 関連情報へのリンクを適切に配置
2. **循環参照を避ける**: 無限ループにならないよう注意
3. **デッドリンクチェック**: ファイル移動・削除時は全リンクを確認

## メンテナンスチェックリスト

### バージョンリリース時

- [ ] すべてのリンクが有効か確認
- [ ] 古くなった情報を更新
- [ ] 新機能のドキュメント追加
- [ ] コード例が最新のAPIと一致するか確認
- [ ] バージョン番号と日付を更新（CLAUDE.mdなど）

### コードベース変更時

- [ ] **アーキテクチャ変更** → `reference/architecture.md`更新
- [ ] **新しいコーディング規約** → `guides/coding-guidelines.md`更新
- [ ] **ビルドプロセス変更** → `guides/development-workflow.md`更新
- [ ] **新しいタスクパターン** → `troubleshooting/common-tasks.md`更新
- [ ] **基本原則変更** → `guides/getting-started.md`更新
- [ ] **設定追加** → `reference/configuration.md`更新

### ドキュメント構造変更時

- [ ] `CLAUDE.md`のドキュメント構成セクション更新
- [ ] 各カテゴリのREADME.md更新
- [ ] クロスリファレンスリンクを確認
- [ ] `documentation-guide.md`（本ファイル）を更新

## トラブルシューティング

### リンクが機能しない

**原因**: ファイル名の不一致、相対パスの誤り

**解決方法**:
1. ファイル名が正確か確認（大文字小文字を含む）
2. 相対パスが正しいか確認
   - 同じディレクトリ: `file.md`
   - 親ディレクトリ: `../CLAUDE.md`
   - 他のディレクトリ: `../other-dir/file.md`
3. マークダウンリンク構文が正しいか確認: `[テキスト](ファイル名.md)`

### ドキュメントが長すぎる

**原因**: 責務が多すぎる、詳細すぎる

**解決方法**:
1. セクションを別ファイルに分割
2. 詳細な例を削除し、コードへのリンクに置き換え
3. 冗長な説明を簡潔にまとめる

### 情報の重複

**原因**: 複数のファイルに同じ情報がある

**解決方法**:
1. 1つの正規の場所を決定（最も関連性の高いディレクトリ）
2. 他の場所からはリンクで参照
3. または、異なる視点から説明する（例：概要 vs 詳細）

## まとめ

このドキュメント構造は以下を実現します：

1. **効率性**: AIアシスタントは必要な情報だけを読み込める
2. **保守性**: 各ドキュメントが明確な責務を持ち更新しやすい
3. **発見性**: 用途別ディレクトリとリンクで情報を見つけやすい
4. **拡張性**: 新しいトピックを簡単に追加できる

ドキュメントはコードと同様に**進化するもの**です。プロジェクトの成長に合わせて、このガイドラインに従って継続的に更新してください。

---

**最終更新**: 2026-01-02
**プロジェクトバージョン**: 1.0.4

[← メイン](CLAUDE.md)
