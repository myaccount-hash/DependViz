# タスクワークフロー - DependViz

このドキュメントは頻出するタスクの実行手順をチェックリスト形式で提供する。[開発規約](conventions.md)を参照しながら使用する。

## 📋 共通操作

**すべてのタスクで実行すべき基本操作**

詳細は[開発規約 - コード更新時の共通操作](conventions.md#コード更新時の共通操作)を参照。

### 変更前
- [ ] 最新コードを取得: `git pull origin feature/2d-graph`
- [ ] 現在の状態を確認: `git status`, `git diff`

### 変更中
- [ ] 段階的に実装（小さな変更 → 動作確認を繰り返す）
- [ ] 継続的にテスト
- [ ] リント実行: `npm run lint`

### 変更後
- [ ] ビルド確認: `npm run build`
- [ ] 動作確認（手動テスト）
- [ ] 関連ドキュメント更新
- [ ] コミット前の最終確認（意図しないファイル、デバッグコード、機密情報）

---

## 1. テストコードの追加

### 📌 前提条件（いつ実行するか）
- ユーザが明示的にテスト作成を要求した場合
- リグレッション防止が重要な箇所を実装した場合

### 📝 関連規約
- [開発規約 - テスト規約](conventions.md#テスト規約)
- [開発ワークフロー - テスト](development-workflow.md#テスト)

### ✅ 実行ステップ

#### 自動テストの作成（要求時のみ）

**テストケースの設計**:
- [ ] テスト対象の機能を明確化
- [ ] 正常系のテストケースを洗い出し
- [ ] 異常系（エラーハンドリング）のテストケースを洗い出し
- [ ] エッジケースを検討

**テストコードの作成**:
- [ ] テストファイルを作成（例: `src/__tests__/YourModule.test.js`）
- [ ] テストフレームワークをセットアップ（Jest など）
- [ ] テストケースを実装
  ```javascript
  describe('YourModule', () => {
    test('should do something', () => {
      // Arrange
      const input = 'test';

      // Act
      const result = yourFunction(input);

      // Assert
      expect(result).toBe('expected');
    });
  });
  ```

**テストの実行**:
- [ ] テストを実行: `npm test`（設定されている場合）
- [ ] すべてのテストが通過することを確認
- [ ] カバレッジを確認（必要に応じて）

**手動テストの更新**:
- [ ] 手動テストチェックリストに新しい項目を追加
- [ ] [開発ワークフロー](development-workflow.md#手動テストチェックリスト)のチェックリストを更新

### 📂 関連ファイル
- `src/__tests__/` - テストファイル
- `package.json` - テストスクリプト設定

---

## 2. コメントの修正

### 📌 前提条件（いつ実行するか）
- コードを変更してコメントが古くなった場合
- 複雑なロジックを追加した場合
- コードレビューでコメント追加を指摘された場合

### 📝 関連規約
- [開発規約 - コメント規約](conventions.md#コメント規約)

### ✅ 実行ステップ

**既存コメントの確認**:
- [ ] 変更したコード周辺のコメントを確認
- [ ] 古くなったコメントを特定
- [ ] 誤った情報を含むコメントを特定

**コメントの修正**:
- [ ] 古いコメントを更新または削除
- [ ] 必要に応じて新しいコメントを追加（規約に従って判断）
- [ ] コメントアウトされたコードを削除

**コメント規約の確認**:
- [ ] 簡潔性を保っているか
- [ ] 自明なコードにコメントを追加していないか
- [ ] 複雑なロジックに適切な説明があるか

### 📂 関連ファイル
修正対象のコードファイル全般

---

## 3. 不要コードの削除

### 📌 前提条件（いつ実行するか）
- リファクタリング時
- 機能削除時
- コードレビューで指摘された場合

### 📝 関連規約
- [開発規約 - 不要コード削除の規約](conventions.md#不要コード削除の規約)

### ✅ 実行ステップ

#### 不要コードの特定

**検索ツールの使用**:
- [ ] IDEの「使用箇所を検索」機能を使用
- [ ] grepで全体検索: `grep -r "functionName" src/`
- [ ] 未使用の変数・関数をIDEで確認（警告マーク）

**不要コードのパターン**:
- [ ] コメントアウトされたコード
- [ ] 使用されていない変数・関数
- [ ] 到達不可能なコード（デッドコード）
- [ ] 重複したコード

#### 削除前の確認

- [ ] 本当に使用されていないか全検索で確認
- [ ] 将来の実装のためのプレースホルダーではないか確認
- [ ] 他のファイルから参照されていないか確認
- [ ] テストコードで使用されていないか確認

#### 安全な削除

**段階的削除**:
- [ ] 一度に少量ずつ削除
- [ ] 削除後にビルドを確認
- [ ] 削除後に動作確認

**バックアップ**:
- [ ] Gitで管理されているため、削除前のコミットを確認
- [ ] 必要に応じてブランチを作成

#### 削除後の確認

- [ ] ビルドが成功することを確認: `npm run build`
- [ ] リントエラーがないことを確認: `npm run lint`
- [ ] 手動テストを実行
- [ ] 削除によって他の機能が影響を受けていないか確認

### 📂 関連ファイル
- `src/` - 拡張機能コード
- `webview/src/` - Webviewコード
- `java/src/` - Java LSPサーバコード

---

## 4. コードレビュー

### 📌 前提条件（いつ実行するか）
- プルリクエスト作成時
- 重要な変更を実装した後
- ペアプログラミング時

### 📝 関連規約
- [開発規約 - コードレビュー規約](conventions.md#コードレビュー規約)

### ✅ 実行ステップ

#### レビュー観点のチェックリスト

**基本原則の遵守**:
- [ ] 簡潔性が保たれているか
- [ ] 過度な抽象化がないか
- [ ] 動作中のコードを不必要にリファクタリングしていないか

参照: [開発規約 - コードレビュー規約](conventions.md#レビューの観点)

**コーディング規約**:
- [ ] 命名規約に従っているか
- [ ] エラーハンドリングが適切か
- [ ] ファイル構成が正しいか

**アーキテクチャ**:
- [ ] 既存パターンに従っているか
- [ ] レイヤ分離が適切か
- [ ] メッセージフロー（拡張機能 ↔ Webview）が正しいか

**セキュリティ**:
- [ ] XSS, SQLインジェクション, コマンドインジェクションなどの脆弱性がないか
- [ ] 入力バリデーションが適切か
- [ ] 機密情報がハードコードされていないか

**パフォーマンス**:
- [ ] 不要なループや処理がないか
- [ ] メモリリークの可能性がないか
- [ ] 大量データの処理が適切か

#### フィードバックの書き方

**良いフィードバックの例**:
```markdown
この処理は O(n²) の計算量になっています。
Map を使うことで O(n) に改善できます。

提案:
const map = new Map();
for (const item of items) {
  map.set(item.id, item);
}
```

**悪いフィードバックの例**:
```markdown
このコードは良くないです。
```

**フィードバックのポイント**:
- [ ] 具体的な問題点を指摘
- [ ] 改善案を提示
- [ ] コード例を含める（可能な場合）
- [ ] 建設的な表現を使用

### 📂 関連ファイル
レビュー対象のすべてのファイル

---

## 5. ドキュメントの整理

### 📌 前提条件（いつ実行するか）
- 新機能追加時
- アーキテクチャ変更時
- コーディング規約変更時
- バージョンリリース前

### 📝 関連規約
- [開発規約 - ドキュメント整理の規約](conventions.md#ドキュメント整理の規約)
- [ドキュメント管理ガイド](../documentation-guide.md)

### ✅ 実行ステップ

#### 更新すべきドキュメントの特定

**コードベース変更に応じて**:
- [ ] **アーキテクチャ変更** → `reference/architecture.md`
- [ ] **新しいコーディング規約** → `guides/coding-guidelines.md`
- [ ] **ビルドプロセス変更** → `guides/development-workflow.md`
- [ ] **新しいタスクパターン** → `troubleshooting/common-tasks.md`
- [ ] **基本原則変更** → `guides/getting-started.md`
- [ ] **設定追加** → `reference/configuration.md`

#### ドキュメント更新

**内容の更新**:
- [ ] 古い情報を最新の内容に更新
- [ ] 新しいセクションを追加
- [ ] コード例を最新APIに合わせて更新
- [ ] バージョン番号と日付を更新

**リンクの確認**:
- [ ] 内部リンクが正しいか確認
- [ ] リンク切れがないか確認
- [ ] 新しいドキュメントへのリンクを追加

#### メンテナンスチェックリスト

詳細は[ドキュメント管理ガイド - メンテナンスチェックリスト](../documentation-guide.md#メンテナンスチェックリスト)を参照。

**バージョンリリース時**:
- [ ] すべてのリンクが有効か確認
- [ ] 古くなった情報を更新
- [ ] 新機能のドキュメント追加
- [ ] コード例が最新のAPIと一致するか確認
- [ ] バージョン番号と日付を更新（CLAUDE.mdなど）

**ドキュメント構造変更時**:
- [ ] `CLAUDE.md`のドキュメント構成セクション更新
- [ ] 各カテゴリのREADME.md更新
- [ ] クロスリファレンスリンクを確認
- [ ] `documentation-guide.md`を更新

### 📂 関連ファイル
- `.claude/CLAUDE.md` - メインエントリポイント
- `.claude/guides/` - 開発ガイド
- `.claude/reference/` - リファレンス情報
- `.claude/troubleshooting/` - トラブルシューティング
- `.claude/documentation-guide.md` - ドキュメント管理ガイド

---

## 関連ドキュメント

- [開発規約](conventions.md) - コメント、テスト、レビューなどの規約
- [コーディング規約](coding-guidelines.md) - 命名規則、構成原則
- [開発ワークフロー](development-workflow.md) - ビルド、テスト、デバッグ
- [一般的なタスク](../troubleshooting/common-tasks.md) - 実装パターン
- [ドキュメント管理ガイド](../documentation-guide.md) - ドキュメント保守方法

---

[← 開発規約](conventions.md) | [ガイド一覧 →](README.md)
