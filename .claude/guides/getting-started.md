# はじめに - DependViz

このドキュメントはDependVizの基本原則とプロジェクト概要を説明します。

## 基本原則

**保守性と簡潔性**が最優先事項である.

### コード作成時
- 簡潔に保つ - 単純明快なコードが「巧妙な」コードより優れる
- 過度な抽象化を避ける - 3行の類似コードは許容される
- 動作しているコードは実際の問題がない限りリファクタリングしない
- ロジックが本当に複雑な場合以外はコメントを追加しない
- **パフォーマンスよりも簡潔性を優先** - マイクロ最適化やキャッシングより読みやすいコードを選ぶ

### バグ修正時
- 問題を修正するための最小限の変更を行う
- 適切な箇所でエラーハンドリングを改善する
- 手動でテストする(要求されない限り自動テストを書く必要はない)

## プロジェクト概要

**DependViz**はコード依存関係をインタラクティブな2D/3D力学的グラフで可視化するVS Code拡張機能である.コード間の関係(クラス継承,メソッド呼び出し,インポートなど)を解析し,ユーザが依存関係を探索,フィルタリング,ナビゲートできるインタラクティブなグラフとして表示する.

### 主要機能
- 2D/3D力学的グラフ可視化
- Java(LSP経由)とJavaScript(Babelパーサ)のサポート
- ノード/エッジタイプによるインタラクティブなフィルタリング
- 依存スライス(前方/後方探索)
- エディタとのリアルタイム同期
- カスタマイズ可能な視覚設定(色,サイズ,不透明度)

### 技術スタック
- **拡張機能**: Node.js, VS Code Extension API, Language Server Protocol (LSP)
- **Webview**: JavaScript, force-graph (2D), 3d-force-graph (3D), Three.js
- **Java解析器**: Java 21, JavaParser, LSP4J, Maven
- **ビルド**: Webpack (webviewのバンドル), Maven (Java LSPサーバ)

## AIアシスタント向けガイドライン

### 実行すべきこと
1. **簡潔に保つ**: 「完璧に」アーキテクトされていなくても単純明快なコードを書く
2. **既存パターンに従う**: 基底クラスが存在する場所では使用するが,存在しない場所でパターンを強制しない
3. **レイヤを識別**: 拡張機能,Webview,Java LSPのどこにいるか把握
4. **段階的にテスト**: 小さな変更を行い動作を確認
5. **メッセージフローを確認**: 拡張機能またはWebviewを変更する際は拡張機能 ↔ webview通信を検証
6. **命名規約に従う**: 既存の命名パターン(camelCase, PascalCaseなど)を使用
7. **保守的にバグ修正**: 問題を修正するための最小限の変更を行う

### 実行してはいけないこと
1. **過度な抽象化**: 単純なコードで動作する場所に設計パターンを導入しない
2. **動作中のコードをリファクタリング**: うまく動作しているコードを「改善」のために書き直さない
3. **過度なコメント**: コードロジックが複雑でない限りJSDocやコメントを避ける
4. **パターン遵守を強制**: コードベースにはいくつかのパターンがあるが簡潔性の方が重要
5. **不必要な抽象化を追加**: 3行の類似コードは時期尚早な抽象化より良い
6. **1回だけの使用のためのヘルパー作成**: 複数回再利用されない限りユーティリティを作成しない
7. **自動的にテストを追加**: ユーザが要求しない限りテストを追加しない

### 迷った場合
- 優雅さより簡潔性を優先
- 完璧なアーキテクチャより動作するコードを優先
- 大規模リファクタリングより小さな変更を優先
- 不確かな場合はユーザに確認

## 次のステップ

- [コーディング規約](coding-guidelines.md) - コードを書く際の規約を確認
- [開発ワークフロー](development-workflow.md) - 開発環境をセットアップ
- [アーキテクチャ](../reference/architecture.md) - システム設計を理解

---

[← ガイド一覧](README.md) | [コーディング規約 →](coding-guidelines.md)
